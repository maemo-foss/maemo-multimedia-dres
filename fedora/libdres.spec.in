%define _enable_debug_packages 0
%define _unpackaged_files_terminate_build 0

Summary: Dependency resolver for OHM.
Name: libdres
Version: ##__VERSION__##
Release: 1
License: Proprietary
Group: Development/Libraries
URL: http://127.0.0.1
Source0: %{name}-%{version}.tar.gz
BuildArch: ##__ARCH__##
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root

%package devel
Summary: Dependency resolver development files.
Group: Development/Libraries
Requires: libdres

%package -n ohm-plugin-resolver
Summary: OHM dependency resolver plugin.
Group: System Environment/Daemons
Requires: libdres, ohm-plugin-core, ohm

%package utils
Summary: Miscallaneous DRES utilities, including dresc.
Group: Development/Libraries
Requires: libdres

%description
A dependency resolver for OHM.

%description devel
This package contains files necessary for developing with the prolog
DRES dependency resolver library.

%description -n ohm-plugin-resolver
A dependency resolver plugin for OHM.

%description utils
Miscallaneous DRES utilities, including dresc.

%prep
%setup -q -n ##__TARDIR__##

%build
export CFLAGS="-O0 -g3"
%configure --disable-static
make

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
%makeinstall
    

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT


%files
%defattr(-,root,root,-)
%{_libdir}/libdres*

%files devel
%defattr(-,root,root,-)
%{_includedir}/dres
%{_libdir}/pkgconfig/*

%files -n ohm-plugin-resolver
%defattr(-,root,root,-)
%{_libdir}/ohm/libohm_dres.so

%files utils
%defattr(-,root,root,-)
%{_bindir}/dresc

%changelog
* Wed Apr 24 2008 Krisztian Litkey <krisztian.litkey@nokia.com> - 
- Initial build.
